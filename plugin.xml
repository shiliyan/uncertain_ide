<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.0"?>
<plugin>
   <extension
         point="org.eclipse.ui.newWizards">
      <wizard
            category="aurora.ide.wizard"
            class="project.wizard.ProjectWizard"
            icon="icons/aurora.gif"
            id="aurora.ide.wizard.ProjectWizard"
            name="%aurora.project"
            project="true"/>
      <category
            id="aurora.ide.wizard"
            name="%category.name">
      </category>
      <wizard
            category="aurora.ide.wizard"
            class="screen.wizard.ServiceNewWizard"
            icon="icons/service.gif"
            id="aurora.ide.wizard.ServiceNewWizard"
            name="%wizard.screen.file">
      </wizard>
      <wizard
            category="aurora.ide.wizard"
            class="sxsd.editor.SxsdNewWizard"
            icon="icons/sxsd.gif"
            id="aurora.ide.wizard.SxsdNewWizard"
            name="%wizard.sxsd.file">
      </wizard>
      <wizard
            category="aurora.ide.wizard"
            class="bm.wizard.table.BMFromDBWizard"
            icon="icons/bm.gif"
            id="aurora.ide.wizard.BMFromDBWizard"
            name="%wizard.create.bm.from.database">
      </wizard>
      <wizard
            category="aurora.ide.wizard"
            class="bm.wizard.sql.BMFromSQLWizard"
            icon="icons/sql.gif"
            id="aurora.ide.wizard.BMFromSQLWizard"
            name="%wizard.create.bm.from.sql">
      </wizard>
      <wizard
            category="aurora.ide.wizard"
            class="bm.wizard.procedure.BMFromProcedure"
            icon="icons/sql.gif"
            id="aurora.ide.wizard.BMFromProcedure"
            name="从数据库过程创建BM文件">
      </wizard>
   </extension>
      <extension
          point="org.eclipse.ui.contexts">
       <context
             name="Aurora EditorScope"
             description="Aurora EditorScope"
             parentId="org.eclipse.ui.textEditorScope"
             id="aurora.ide.EditorScope">
       </context>
   </extension>
   <extension
         id="BussinessModelEditor"
         point="org.eclipse.ui.editors">
      <editor
            class="screen.editor.ServiceEditor"
            default="true"
            filenames="*.service,*.screen,*.svc"
            icon="icons/service.gif"
            id="aurora.ide.ServiceEditor"
            name="%editor.screen"/>
      <editor
            class="sxsd.editor.SxsdEditor"
            default="true"
            filenames="*.sxsd"
            icon="icons/sxsd.gif"
            id="aurora.ide.SxsdEditor"
            name="%editor.sxsd">
      </editor>
      <editor
            class="bm.editor.BussinessModelEditor"
            default="true"
            filenames="*.bm"
            icon="icons/bm.gif"
            id="aurora.ide.BussinessModelEditor"
            name="%editor.bm">
      </editor>
   </extension>
   <extension
         point="org.eclipse.ui.preferencePages">
      <page
            category="aurora.ide.preferencePage"
            class="preferencepages.SxsdDirPreferencePage"
            id="aurora.ide.preferencePage.SxsdDirectoryPreferencePage"
            name="%page.builtin.package">
      </page>
      <page
            category="aurora.ide.preferencePage"
            class="preferencepages.BrowserPreferencePage"
            id="aurora.ide.preferencePage.BrowserPreferencePage"
            name="%page.screen.preview">
      </page>
      <page
            class="preferencepages.AuroraPreferencePage"
            id="aurora.ide.preferencePage"
            name="%page.root">
      </page>
      <page
            category="aurora.ide.preferencePage"
            class="preferencepages.AuroraTemplatePreferencePage"
            id="aurora.ide.preferencePage.TemplatesPage"
            name="%page.templates">
      </page>
   </extension>
   <extension
         point="org.eclipse.ui.popupMenus">
      <objectContribution
            adaptable="true"
            id="aurora.ide.sxsd.valid"
            objectClass="org.eclipse.core.resources.IResource">
         <action
               class="navigator.action.SxsdPackageValidAction"
               icon="icons/sxsd.gif"
               id="aurora.ide.action.SxsdPackageValidAction"
               label="%action.validate.builtin.package"
               enablesFor="1"
               menubarPath="additions">
         </action>
         <enablement>
            <and>
            	 <instanceof value="org.eclipse.core.resources.IContainer"/>
            	 <test
                  forcePluginActivation="true"
                  property="aurora.ide.sxsd.valid.visable"
                  value="true"/>
            </and>
         </enablement>
      </objectContribution>
	   <viewerContribution 
	      id="aurora.ide.editor.textpage.format"
	   targetID="aurora.ide.editor.textpage.context"> 
	      <action
	         id="aurora.ide.editor.textpage.FormatAction" 
	         label="格式化XML"
	         menubarPath="additions" 
	         class="editor.textpage.action.FormatAction"> 
	      </action>
       <action
             class="editor.textpage.action.GetFileNameAction"
             id="aurora.ide.editor.textpage.GetFileNameAction"
             label="复制文件名"
             menubarPath="additions">
       </action>
       <action
             class="editor.textpage.action.AnnotateSeletionAction"
             id="aurora.ide.editor.textpage.annotateseletionaction"
             label="注释"
             menubarPath="additions">
       </action>
       <action
             class="editor.textpage.action.CancelAnnotateSeletionAction"
             id="aurora.ide.editor.textpage.cancelannotateseletionaction"
             label="取消注释"
             menubarPath="additions">
       </action>
       <action
             class="editor.textpage.action.FormatJS"
             id="aurora.ide.editor.textpage.FormatJS"
             label="格式化JS"
             menubarPath="additions">
       </action>
	   </viewerContribution>
    <objectContribution
          adaptable="true"
          id="aurora.ide.extendbm"
          nameFilter="*.bm"
          objectClass="org.eclipse.core.resources.IFile">
       <action
             class="navigator.action.CreateBMByExtendAction"
             enablesFor="1"
             icon="icons/bm.gif"
             id="aurora.ide.navigator.createbmbyextendaction"
             label="继承此BM"
             menubarPath="additions"> 
       </action>
    </objectContribution>
    <objectContribution
          adaptable="true"
          id="aurora.ide.add.auroranature"
          objectClass="org.eclipse.core.resources.IProject">
       <action
             class="navigator.action.AddAuroraNature"
             enablesFor="1"
             icon="icons/aurora.gif"
             id="aurora.ide.navigator.action.addauroranature"
             label="设置为Aurora工程"
             menubarPath="additions">
       </action>
       <enablement>
          <and>
             <instanceof
                   value="org.eclipse.core.resources.IProject">
             </instanceof>
             <test
                   args="false"
                   forcePluginActivation="true"
                   property="aurora.ide.project.nature"
                   value="true">
             </test>
          </and>
       </enablement>
    </objectContribution>
    <objectContribution
          adaptable="true"
          id="aurora.ide.add.auroranature"
          objectClass="org.eclipse.core.resources.IProject">
       <action
             class="navigator.action.RemoveAuroraNature"
             enablesFor="1"
             icon="icons/aurora.gif"
             id="aurora.ide.navigator.action.removauroranature"
             label="取消Aurora工程设置"
             menubarPath="additions">
       </action>
       <enablement>
          <and>
             <instanceof
                   value="org.eclipse.core.resources.IProject">
             </instanceof>
             <test
                   args="true"
                   forcePluginActivation="true"
                   property="aurora.ide.project.nature"
                   value="true">
             </test>
          </and>
       </enablement>
    </objectContribution> 
    
    <objectContribution
          adaptable="true"
          id="aurora.ide.bm.reference"
          nameFilter="*.bm"
          objectClass="org.eclipse.core.resources.IFile">
       <action
             class="aurora.search.action.FileReferenceAciton"
             enablesFor="1"
             icon="icons/bm.gif"
             id="aurora.search.action.BMReferenceAciton"
             label="Reference"
             menubarPath="additions"> 
       </action>
    </objectContribution>
      <objectContribution
          adaptable="true"
          id="aurora.ide.bm.reference"
          nameFilter="*.screen"
          objectClass="org.eclipse.core.resources.IFile">
       <action
             class="aurora.search.action.FileReferenceAciton"
             enablesFor="1"
             icon="icons/service.gif"
             id="aurora.search.action.ScreenReferenceAciton"
             label="Reference"
             menubarPath="additions"> 
       </action>
    </objectContribution>
    <viewerContribution 
	      id="aurora.ide.editor.textpage.reference"
	   	  targetID="aurora.ide.editor.textpage.context"> 
	      <action
	         id="aurora.search.action.FieldReferenceAction" 
	         label="Reference"
	         menubarPath="additions" 
	         class="aurora.search.action.FieldReferenceAction"> 
	      </action>
	     
    </viewerContribution>
   </extension>
       <extension  point ="org.eclipse.core.expressions.propertyTesters" > 
    <propertyTester
  	  namespace ="aurora.ide.sxsd.valid" 
 	  properties ="visable" 
      type ="java.lang.Object" 
      class ="navigator.action.SxsdValidVisablePropertyTester" 
      id ="aurora.ide.action.SxsdValidVisablePropertyTeste" >   
    </propertyTester >
    <propertyTester
          class="navigator.BMHierarchyViewerTester"
          id="aurora.ide.navigator.BMHierarchyTester"
          namespace="aurora.ide.navigator.bm.container"
          properties="triggerponits"
          type="java.lang.Object">
    </propertyTester>
    <propertyTester
          class="navigator.action.ProjectNatureTester"
          id="aurora.ide.navigator.action.projectnaturetester"
          namespace="aurora.ide.project"
          properties="nature"
          type="java.lang.Object">
    </propertyTester>
    </extension >
       <extension
             point="org.eclipse.ui.editors.templates">
          <contextType
                class="preferencepages.AuroraTemplateContextType"
                id="aurora.ide.new_screen"
                name="%contextType.new.screen">
          </contextType>
          <contextType
                class="preferencepages.AuroraTemplateContextType"
                id="aurora.ide.sign"
                name="签名">
          </contextType>
          <include
                file="templates/default-templates.xml"
                translations="templates/default-templates.properties">
          </include>
          
       </extension>
       <extension
             point="org.eclipse.ui.actionSets">
          <actionSet
                description="quick open file actionSets"
                id="aurora.ide.actionset.quickopenfile"
                label="quick open file actionSets"
                visible="true">
             <action
                   class="toolbar.action.OpenFileAction"
                   icon="icons/openfile.gif"
                   id="aurora.ide.action.quickopenfile"
                   label="quick open file"
                   style="push"
                   toolbarPath="additions"
                   tooltip="open a file with finename">
             </action>
          </actionSet>
       </extension>
       <extension
             point="org.eclipse.ui.navigator.viewer">
          <viewer
                viewerId="org.eclipse.ui.navigator.ProjectExplorer">
          </viewer>
          <viewerContentBinding
                viewerId="org.eclipse.ui.navigator.ProjectExplorer">
             <includes>
                <contentExtension
                      pattern="aurora.ide.navigator.filter">
                </contentExtension>
                <contentExtension
                      pattern="aurora.ide.navigator.bmhierarchy">
                </contentExtension>
             </includes>
          </viewerContentBinding>
       </extension>
		<extension
             point="org.eclipse.ui.navigator.navigatorContent">
          <commonFilter
                activeByDefault="true"
                class="navigator.BMFileFilter"
                description="Filter leaf BM"
                id="aurora.ide.navigator.filter"
                name="Filter leaf BM">
          </commonFilter>
          <navigatorContent
                activeByDefault="true"
                contentProvider="navigator.BMFileContentProvider"
                icon="icons/bm.gif"
                id="aurora.ide.navigator.bmhierarchy"
                labelProvider="navigator.BMFileLabelProvider"
                name="BM  Hierarchy"
                priority="lowest">
             	<triggerPoints>
                    <test
                          forcePluginActivation="true"
                          property="aurora.ide.navigator.bm.container.triggerponits"
                          value="true">
                    </test>
             </triggerPoints>
             <possibleChildren>
                <or>
                   <instanceof
                         value="org.eclipse.core.resources.IFile">
                   </instanceof>
                   <instanceof
                         value="navigator.BMFile">
                   </instanceof>
                </or>
             </possibleChildren>
          </navigatorContent>
       </extension>
	<extension point="org.eclipse.ui.propertyPages">
	  <page
         adaptable="true"
         class="project.propertypage.ProjectPropertyPage"
         icon="icons/aurora.gif"
         id="aurora.ide.projectproperty"
         name="Aurora工程设置"
         objectClass="org.eclipse.core.resources.IProject">
      <filter name="nature" value="aurora.ide.auroranature"/>
	  </page>
	</extension>
	<extension  
      point="org.eclipse.ui.editors.annotationTypes">  
   		<type  
         markerSeverity="2"  
         markerType="org.eclipse.core.resources.textmarker"  
         name="aurora.ide.word.highlight"  
         super="org.eclipse.search.results">  
  		 </type>
     <type
           markerSeverity="2"
           markerType="org.eclipse.core.resources.problemmarker"
           name="aurora.ide.text.valid"
           super="org.eclipse.ui.workbench.texteditor.error">
     </type>
     <type
           markerSeverity="2"
           markerType="org.eclipse.core.resources.textmarker"
           name="aurora.ide.braces.match">
     </type>  
		</extension>  
	<extension  
	      point="org.eclipse.ui.editors.markerAnnotationSpecification">  
	   <specification
          annotationType="aurora.ide.word.highlight"
          colorPreferenceKey="highlight.corlor"
          colorPreferenceValue="212,212,212"
          highlightPreferenceKey="highlight.highlight"
          highlightPreferenceValue="true"
          includeOnPreferencePage="true"
          isGoToNextNavigationTarget="true"
          isGoToNextNavigationTargetKey="hightlight.isOccurrenceGoToNextNavigationTarget"
          isGoToPreviousNavigationTarget="true"
          isGoToPreviousNavigationTargetKey="highlight_isOccurrenceGoToPreviousNavigationTarget"
          label="Aurora Word Highlight"
          overviewRulerPreferenceKey="highlight.overviewRuler"
          overviewRulerPreferenceValue="true"
          showInNextPrevDropdownToolbarAction="true"
          showInNextPrevDropdownToolbarActionKey="highlight.showInNextPrevDropdownToolbarAction"
          textPreferenceKey="highlight.text"
          textPreferenceValue="true"
          verticalRulerPreferenceKey="highlight.verticalRuler"
          verticalRulerPreferenceValue="false">
	  </specification>
   <specification  
         annotationType="aurora.ide.text.valid"  
         colorPreferenceKey="text.valid.color"  
         colorPreferenceValue="255,0,0"  
         contributesToHeader="true"  
         highlightPreferenceKey="text.valid.highlight"  
         highlightPreferenceValue="false"  
         icon="icons/error.gif"  
         includeOnPreferencePage="true"  
         isGoToNextNavigationTarget="true"  
         isGoToNextNavigationTargetKey="text.valid.isOccurrenceGoToNextNavigationTarget"  
         isGoToPreviousNavigationTarget="true"  
         isGoToPreviousNavigationTargetKey="text.valid.isOccurrenceGoToPreviousNavigationTarget"  
         label="Aurora Text Valid"  
         overviewRulerPreferenceKey="text.valid.overviewRuler"  
         overviewRulerPreferenceValue="true"  
         presentationLayer="4"  
         quickFixIcon="icons/error.gif"  
         showInNextPrevDropdownToolbarAction="true"  
         showInNextPrevDropdownToolbarActionKey="text.valid.showInNextPrevDropdownToolbarAction"  
         symbolicIcon="error"  
         textPreferenceKey="text.valid.text"  
         textPreferenceValue="true"  
         textStylePreferenceKey="text.valid.textStyle"  
         textStylePreferenceValue="PROBLEM_UNDERLINE"  
         verticalRulerPreferenceKey="text.valid.verticalRuler"  
         verticalRulerPreferenceValue="true">  
   </specification>
   <specification
         annotationType="aurora.ide.braces.match"
         colorPreferenceKey="braces.match.color"
         colorPreferenceValue="0,128,255"
         highlightPreferenceKey="braces.match.highlight"
         highlightPreferenceValue="false"
         includeOnPreferencePage="true"
         isGoToNextNavigationTarget="false"
         isGoToPreviousNavigationTarget="false"
         label="Aurora Brace Match"
         overviewRulerPreferenceKey="braces.match.overviewRuler"
         overviewRulerPreferenceValue="false"
         showInNextPrevDropdownToolbarAction="false"
         textPreferenceKey="braces.match.text"
         textPreferenceValue="true"
         textStylePreferenceKey="braces.match.textStyle"
         textStylePreferenceValue="BOX"
         verticalRulerPreferenceKey="braces.match.verticalRuler"
         verticalRulerPreferenceValue="false">
   </specification>
	</extension>
	<extension  
      id="auroranature"  
      point="org.eclipse.core.resources.natures">  
   <runtime>  
      <run  
            class="ide.AuroraProjectNature">  
      </run>  
   </runtime>  
</extension>
 <extension
       point="org.eclipse.ui.commands">
    <category
          description="Aurora commands"
          id="aurora.ide.commands"
          name="Aurora commands">
    </category>
    <command
          categoryId="aurora.ide.commands"
          description="Format Aurora Source Code"
          id="aurora.ide.format"
          name="aurora format ">
    </command>
 </extension>
 <extension
       point="org.eclipse.ui.bindings">
    <key
          commandId="aurora.ide.format"
          contextId="aurora.ide.EditorScope"
          schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
          sequence="M1+M2+P">
    </key>
 </extension>
 <!--shiliyan3310-2011-08-08-->
  
 
 <extension 
    id="aurora.search.SearchResultPage"
    point="org.eclipse.search.searchResultViewPages"> 
    <viewPage 
    id="aurora.search.AuroraSearchResult"
	 searchResultClass="aurora.search.core.AuroraSearchResult"
    class="aurora.search.ui.SearchResultPage"> 
 	</viewPage> 
 </extension>
 
</plugin>
